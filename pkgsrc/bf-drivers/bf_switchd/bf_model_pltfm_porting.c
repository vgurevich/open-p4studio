/*******************************************************************************
 *  Copyright (C) 2024 Intel Corporation
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing,
 *  software distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions
 *  and limitations under the License.
 *
 *
 *  SPDX-License-Identifier: Apache-2.0
 ******************************************************************************/


// Standard includes
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

// Module includes
#include <tofino/bf_pal/bf_pal_types.h>
#include <lld/lld_err.h>
#include <lld/lld_sku.h>
#include <port_mgr/bf_port_if.h>
#include <bf_pm/bf_pm_intf.h>
#include <target-sys/bf_sal/bf_sys_intf.h>
#include <dvm/bf_drv_intf.h>

#define NUM_SIMULATED_DEVICES 3
static int num_devices = NUM_SIMULATED_DEVICES;

static bool device_added[NUM_SIMULATED_DEVICES] = {false};

typedef struct model_fp2mac {
  uint32_t conn_id;
  uint32_t chnl_id;
  uint32_t log_mac;
  uint32_t log_chnl;
} model_fp2mac;

typedef struct model_fp2mac_all {
  model_fp2mac front_port_mapping[65 * 4];
} model_fp2mac_all;

static model_fp2mac_all *front_port_map[NUM_SIMULATED_DEVICES];

static model_fp2mac_all front_port_map_all_skus[] = {

    /* 0: Mavericks mappings */
    {{{1, 0, 15, 0},  {1, 1, 15, 1},  {1, 2, 15, 2},  {1, 3, 15, 3},
      {2, 0, 14, 0},  {2, 1, 14, 1},  {2, 2, 14, 2},  {2, 3, 14, 3},
      {3, 0, 13, 0},  {3, 1, 13, 1},  {3, 2, 13, 2},  {3, 3, 13, 3},
      {4, 0, 12, 0},  {4, 1, 12, 1},  {4, 2, 12, 2},  {4, 3, 12, 3},
      {5, 0, 11, 0},  {5, 1, 11, 1},  {5, 2, 11, 2},  {5, 3, 11, 3},
      {6, 0, 10, 0},  {6, 1, 10, 1},  {6, 2, 10, 2},  {6, 3, 10, 3},
      {7, 0, 9, 0},   {7, 1, 9, 1},   {7, 2, 9, 2},   {7, 3, 9, 3},
      {8, 0, 8, 0},   {8, 1, 8, 1},   {8, 2, 8, 2},   {8, 3, 8, 3},
      {9, 0, 7, 0},   {9, 1, 7, 1},   {9, 2, 7, 2},   {9, 3, 7, 3},
      {10, 0, 6, 0},  {10, 1, 6, 1},  {10, 2, 6, 2},  {10, 3, 6, 3},
      {11, 0, 5, 0},  {11, 1, 5, 1},  {11, 2, 5, 2},  {11, 3, 5, 3},
      {12, 0, 4, 0},  {12, 1, 4, 1},  {12, 2, 4, 2},  {12, 3, 4, 3},
      {13, 0, 3, 0},  {13, 1, 3, 1},  {13, 2, 3, 2},  {13, 3, 3, 3},
      {14, 0, 2, 0},  {14, 1, 2, 1},  {14, 2, 2, 2},  {14, 3, 2, 3},
      {15, 0, 1, 0},  {15, 1, 1, 1},  {15, 2, 1, 2},  {15, 3, 1, 3},
      {16, 0, 0, 0},  {16, 1, 0, 1},  {16, 2, 0, 2},  {16, 3, 0, 3},
      {17, 0, 16, 0}, {17, 1, 16, 1}, {17, 2, 16, 2}, {17, 3, 16, 3},
      {18, 0, 17, 0}, {18, 1, 17, 1}, {18, 2, 17, 2}, {18, 3, 17, 3},
      {19, 0, 18, 0}, {19, 1, 18, 1}, {19, 2, 18, 2}, {19, 3, 18, 3},
      {20, 0, 19, 0}, {20, 1, 19, 1}, {20, 2, 19, 2}, {20, 3, 19, 3},
      {21, 0, 20, 0}, {21, 1, 20, 1}, {21, 2, 20, 2}, {21, 3, 20, 3},
      {22, 0, 21, 0}, {22, 1, 21, 1}, {22, 2, 21, 2}, {22, 3, 21, 3},
      {23, 0, 22, 0}, {23, 1, 22, 1}, {23, 2, 22, 2}, {23, 3, 22, 3},
      {24, 0, 23, 0}, {24, 1, 23, 1}, {24, 2, 23, 2}, {24, 3, 23, 3},
      {25, 0, 24, 0}, {25, 1, 24, 1}, {25, 2, 24, 2}, {25, 3, 24, 3},
      {26, 0, 25, 0}, {26, 1, 25, 1}, {26, 2, 25, 2}, {26, 3, 25, 3},
      {27, 0, 26, 0}, {27, 1, 26, 1}, {27, 2, 26, 2}, {27, 3, 26, 3},
      {28, 0, 27, 0}, {28, 1, 27, 1}, {28, 2, 27, 2}, {28, 3, 27, 3},
      {29, 0, 28, 0}, {29, 1, 28, 1}, {29, 2, 28, 2}, {29, 3, 28, 3},
      {30, 0, 29, 0}, {30, 1, 29, 1}, {30, 2, 29, 2}, {30, 3, 29, 3},
      {31, 0, 30, 0}, {31, 1, 30, 1}, {31, 2, 30, 2}, {31, 3, 30, 3},
      {32, 0, 31, 0}, {32, 1, 31, 1}, {32, 2, 31, 2}, {32, 3, 31, 3},
      {33, 0, 47, 0}, {33, 1, 47, 1}, {33, 2, 47, 2}, {33, 3, 47, 3},
      {34, 0, 46, 0}, {34, 1, 46, 1}, {34, 2, 46, 2}, {34, 3, 46, 3},
      {35, 0, 45, 0}, {35, 1, 45, 1}, {35, 2, 45, 2}, {35, 3, 45, 3},
      {36, 0, 44, 0}, {36, 1, 44, 1}, {36, 2, 44, 2}, {36, 3, 44, 3},
      {37, 0, 43, 0}, {37, 1, 43, 1}, {37, 2, 43, 2}, {37, 3, 43, 3},
      {38, 0, 42, 0}, {38, 1, 42, 1}, {38, 2, 42, 2}, {38, 3, 42, 3},
      {39, 0, 41, 0}, {39, 1, 41, 1}, {39, 2, 41, 2}, {39, 3, 41, 3},
      {40, 0, 40, 0}, {40, 1, 40, 1}, {40, 2, 40, 2}, {40, 3, 40, 3},
      {41, 0, 39, 0}, {41, 1, 39, 1}, {41, 2, 39, 2}, {41, 3, 39, 3},
      {42, 0, 38, 0}, {42, 1, 38, 1}, {42, 2, 38, 2}, {42, 3, 38, 3},
      {43, 0, 37, 0}, {43, 1, 37, 1}, {43, 2, 37, 2}, {43, 3, 37, 3},
      {44, 0, 36, 0}, {44, 1, 36, 1}, {44, 2, 36, 2}, {44, 3, 36, 3},
      {45, 0, 35, 0}, {45, 1, 35, 1}, {45, 2, 35, 2}, {45, 3, 35, 3},
      {46, 0, 34, 0}, {46, 1, 34, 1}, {46, 2, 34, 2}, {46, 3, 34, 3},
      {47, 0, 33, 0}, {47, 1, 33, 1}, {47, 2, 33, 2}, {47, 3, 33, 3},
      {48, 0, 32, 0}, {48, 1, 32, 1}, {48, 2, 32, 2}, {48, 3, 32, 3},
      {49, 0, 48, 0}, {49, 1, 48, 1}, {49, 2, 48, 2}, {49, 3, 48, 3},
      {50, 0, 49, 0}, {50, 1, 49, 1}, {50, 2, 49, 2}, {50, 3, 49, 3},
      {51, 0, 50, 0}, {51, 1, 50, 1}, {51, 2, 50, 2}, {51, 3, 50, 3},
      {52, 0, 51, 0}, {52, 1, 51, 1}, {52, 2, 51, 2}, {52, 3, 51, 3},
      {53, 0, 52, 0}, {53, 1, 52, 1}, {53, 2, 52, 2}, {53, 3, 52, 3},
      {54, 0, 53, 0}, {54, 1, 53, 1}, {54, 2, 53, 2}, {54, 3, 53, 3},
      {55, 0, 54, 0}, {55, 1, 54, 1}, {55, 2, 54, 2}, {55, 3, 54, 3},
      {56, 0, 55, 0}, {56, 1, 55, 1}, {56, 2, 55, 2}, {56, 3, 55, 3},
      {57, 0, 56, 0}, {57, 1, 56, 1}, {57, 2, 56, 2}, {57, 3, 56, 3},
      {58, 0, 57, 0}, {58, 1, 57, 1}, {58, 2, 57, 2}, {58, 3, 57, 3},
      {59, 0, 58, 0}, {59, 1, 58, 1}, {59, 2, 58, 2}, {59, 3, 58, 3},
      {60, 0, 59, 0}, {60, 1, 59, 1}, {60, 2, 59, 2}, {60, 3, 59, 3},
      {61, 0, 60, 0}, {61, 1, 60, 1}, {61, 2, 60, 2}, {61, 3, 60, 3},
      {62, 0, 61, 0}, {62, 1, 61, 1}, {62, 2, 61, 2}, {62, 3, 61, 3},
      {63, 0, 62, 0}, {63, 1, 62, 1}, {63, 2, 62, 2}, {63, 3, 62, 3},
      {64, 0, 63, 0}, {64, 1, 63, 1}, {64, 2, 63, 2}, {64, 3, 63, 3},
      {65, 0, 64, 0}, {65, 1, 64, 1}, {65, 2, 64, 2}, {65, 3, 64, 3}}},

    /* 1: Montara Mappings*/
    {{{1, 0, 23, 0},  {1, 1, 23, 1},  {1, 2, 23, 2},  {1, 3, 23, 3},
      {2, 0, 22, 0},  {2, 1, 22, 1},  {2, 2, 22, 2},  {2, 3, 22, 3},
      {3, 0, 21, 0},  {3, 1, 21, 1},  {3, 2, 21, 2},  {3, 3, 21, 3},
      {4, 0, 20, 0},  {4, 1, 20, 1},  {4, 2, 20, 2},  {4, 3, 20, 3},
      {5, 0, 19, 0},  {5, 1, 19, 1},  {5, 2, 19, 2},  {5, 3, 19, 3},
      {6, 0, 18, 0},  {6, 1, 18, 1},  {6, 2, 18, 2},  {6, 3, 18, 3},
      {7, 0, 17, 0},  {7, 1, 17, 1},  {7, 2, 17, 2},  {7, 3, 17, 3},
      {8, 0, 16, 0},  {8, 1, 16, 1},  {8, 2, 16, 2},  {8, 3, 16, 3},
      {9, 0, 15, 0},  {9, 1, 15, 1},  {9, 2, 15, 2},  {9, 3, 15, 3},
      {10, 0, 14, 0}, {10, 1, 14, 1}, {10, 2, 14, 2}, {10, 3, 14, 3},
      {11, 0, 13, 0}, {11, 1, 13, 1}, {11, 2, 13, 2}, {11, 3, 13, 3},
      {12, 0, 12, 0}, {12, 1, 12, 1}, {12, 2, 12, 2}, {12, 3, 12, 3},
      {13, 0, 11, 0}, {13, 1, 11, 1}, {13, 2, 11, 2}, {13, 3, 11, 3},
      {14, 0, 10, 0}, {14, 1, 10, 1}, {14, 2, 10, 2}, {14, 3, 10, 3},
      {15, 0, 9, 0},  {15, 1, 9, 1},  {15, 2, 9, 2},  {15, 3, 9, 3},
      {16, 0, 8, 0},  {16, 1, 8, 1},  {16, 2, 8, 2},  {16, 3, 8, 3},
      {17, 0, 7, 0},  {17, 1, 7, 1},  {17, 2, 7, 2},  {17, 3, 7, 3},
      {18, 0, 6, 0},  {18, 1, 6, 1},  {18, 2, 6, 2},  {18, 3, 6, 3},
      {19, 0, 5, 0},  {19, 1, 5, 1},  {19, 2, 5, 2},  {19, 3, 5, 3},
      {20, 0, 4, 0},  {20, 1, 4, 1},  {20, 2, 4, 2},  {20, 3, 4, 3},
      {21, 0, 3, 0},  {21, 1, 3, 1},  {21, 2, 3, 2},  {21, 3, 3, 3},
      {22, 0, 2, 0},  {22, 1, 2, 1},  {22, 2, 2, 2},  {22, 3, 2, 3},
      {23, 0, 1, 0},  {23, 1, 1, 1},  {23, 2, 1, 2},  {23, 3, 1, 3},
      {24, 0, 0, 0},  {24, 1, 0, 1},  {24, 2, 0, 2},  {24, 3, 0, 3},
      {25, 0, 31, 0}, {25, 1, 31, 1}, {25, 2, 31, 2}, {25, 3, 31, 3},
      {26, 0, 30, 0}, {26, 1, 30, 1}, {26, 2, 30, 2}, {26, 3, 30, 3},
      {27, 0, 29, 0}, {27, 1, 29, 1}, {27, 2, 29, 2}, {27, 3, 29, 3},
      {28, 0, 28, 0}, {28, 1, 28, 1}, {28, 2, 28, 2}, {28, 3, 28, 3},
      {29, 0, 26, 0}, {29, 1, 26, 1}, {29, 2, 26, 2}, {29, 3, 26, 3},
      {30, 0, 27, 0}, {30, 1, 27, 1}, {30, 2, 27, 2}, {30, 3, 27, 3},
      {31, 0, 24, 0}, {31, 1, 24, 1}, {31, 2, 24, 2}, {31, 3, 24, 3},
      {32, 0, 25, 0}, {32, 1, 25, 1}, {32, 2, 25, 2}, {32, 3, 25, 3},
      {33, 0, 32, 0}, {33, 1, 32, 1}, {33, 2, 32, 2}, {33, 3, 32, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3}}},

    /* 2: tof2 pltfm Mappings*/
    {{{1, 0, 1, 0},   {1, 1, 1, 1},   {1, 2, 1, 2},   {1, 3, 1, 3},
      {1, 4, 1, 4},   {1, 5, 1, 5},   {1, 6, 1, 6},   {1, 7, 1, 7},
      {2, 0, 2, 0},   {2, 1, 2, 1},   {2, 2, 2, 2},   {2, 3, 2, 3},
      {2, 4, 2, 4},   {2, 5, 2, 5},   {2, 6, 2, 6},   {2, 7, 2, 7},
      {3, 0, 3, 0},   {3, 1, 3, 1},   {3, 2, 3, 2},   {3, 3, 3, 3},
      {3, 4, 3, 4},   {3, 5, 3, 5},   {3, 6, 3, 6},   {3, 7, 3, 7},
      {4, 0, 4, 0},   {4, 1, 4, 1},   {4, 2, 4, 2},   {4, 3, 4, 3},
      {4, 4, 4, 4},   {4, 5, 4, 5},   {4, 6, 4, 6},   {4, 7, 4, 7},
      {5, 0, 5, 0},   {5, 1, 5, 1},   {5, 2, 5, 2},   {5, 3, 5, 3},
      {5, 4, 5, 4},   {5, 5, 5, 5},   {5, 6, 5, 6},   {5, 7, 5, 7},
      {6, 0, 6, 0},   {6, 1, 6, 1},   {6, 2, 6, 2},   {6, 3, 6, 3},
      {6, 4, 6, 4},   {6, 5, 6, 5},   {6, 6, 6, 6},   {6, 7, 6, 7},
      {7, 0, 7, 0},   {7, 1, 7, 1},   {7, 2, 7, 2},   {7, 3, 7, 3},
      {7, 4, 7, 4},   {7, 5, 7, 5},   {7, 6, 7, 6},   {7, 7, 7, 7},
      {8, 0, 8, 0},   {8, 1, 8, 1},   {8, 2, 8, 2},   {8, 3, 8, 3},
      {8, 4, 8, 4},   {8, 5, 8, 5},   {8, 6, 8, 6},   {8, 7, 8, 7},
      {9, 0, 9, 0},   {9, 1, 9, 1},   {9, 2, 9, 2},   {9, 3, 9, 3},
      {9, 4, 9, 4},   {9, 5, 9, 5},   {9, 6, 9, 6},   {9, 7, 9, 7},
      {10, 0, 10, 0}, {10, 1, 10, 1}, {10, 2, 10, 2}, {10, 3, 10, 3},
      {10, 4, 10, 4}, {10, 5, 10, 5}, {10, 6, 10, 6}, {10, 7, 10, 7},
      {11, 0, 11, 0}, {11, 1, 11, 1}, {11, 2, 11, 2}, {11, 3, 11, 3},
      {11, 4, 11, 4}, {11, 5, 11, 5}, {11, 6, 11, 6}, {11, 7, 11, 7},
      {12, 0, 12, 0}, {12, 1, 12, 1}, {12, 2, 12, 2}, {12, 3, 12, 3},
      {12, 4, 12, 4}, {12, 5, 12, 5}, {12, 6, 12, 6}, {12, 7, 12, 7},
      {13, 0, 13, 0}, {13, 1, 13, 1}, {13, 2, 13, 2}, {13, 3, 13, 3},
      {13, 4, 13, 4}, {13, 5, 13, 5}, {13, 6, 13, 6}, {13, 7, 13, 7},
      {14, 0, 14, 0}, {14, 1, 14, 1}, {14, 2, 14, 2}, {14, 3, 14, 3},
      {14, 4, 14, 4}, {14, 5, 14, 5}, {14, 6, 14, 6}, {14, 7, 14, 7},
      {15, 0, 15, 0}, {15, 1, 15, 1}, {15, 2, 15, 2}, {15, 3, 15, 3},
      {15, 4, 15, 4}, {15, 5, 15, 5}, {15, 6, 15, 6}, {15, 7, 15, 7},
      {16, 0, 16, 0}, {16, 1, 16, 1}, {16, 2, 16, 2}, {16, 3, 16, 3},
      {16, 4, 16, 4}, {16, 5, 16, 5}, {16, 6, 16, 6}, {16, 7, 16, 7},
      {17, 0, 17, 0}, {17, 1, 17, 1}, {17, 2, 17, 2}, {17, 3, 17, 3},
      {17, 4, 17, 4}, {17, 5, 17, 5}, {17, 6, 17, 6}, {17, 7, 17, 7},
      {18, 0, 18, 0}, {18, 1, 18, 1}, {18, 2, 18, 2}, {18, 3, 18, 3},
      {18, 4, 18, 4}, {18, 5, 18, 5}, {18, 6, 18, 6}, {18, 7, 18, 7},
      {19, 0, 19, 0}, {19, 1, 19, 1}, {19, 2, 19, 2}, {19, 3, 19, 3},
      {19, 4, 19, 4}, {19, 5, 19, 5}, {19, 6, 19, 6}, {19, 7, 19, 7},
      {20, 0, 20, 0}, {20, 1, 20, 1}, {20, 2, 20, 2}, {20, 3, 20, 3},
      {20, 4, 20, 4}, {20, 5, 20, 5}, {20, 6, 20, 6}, {20, 7, 20, 7},
      {21, 0, 21, 0}, {21, 1, 21, 1}, {21, 2, 21, 2}, {21, 3, 21, 3},
      {21, 4, 21, 4}, {21, 5, 21, 5}, {21, 6, 21, 6}, {21, 7, 21, 7},
      {22, 0, 22, 0}, {22, 1, 22, 1}, {22, 2, 22, 2}, {22, 3, 22, 3},
      {22, 4, 22, 4}, {22, 5, 22, 5}, {22, 6, 22, 6}, {22, 7, 22, 7},
      {23, 0, 23, 0}, {23, 1, 23, 1}, {23, 2, 23, 2}, {23, 3, 23, 3},
      {23, 4, 23, 4}, {23, 5, 23, 5}, {23, 6, 23, 6}, {23, 7, 23, 7},
      {24, 0, 24, 0}, {24, 1, 24, 1}, {24, 2, 24, 2}, {24, 3, 24, 3},
      {24, 4, 24, 4}, {24, 5, 24, 5}, {24, 6, 24, 6}, {24, 7, 24, 7},
      {25, 0, 25, 0}, {25, 1, 25, 1}, {25, 2, 25, 2}, {25, 3, 25, 3},
      {25, 4, 25, 4}, {25, 5, 25, 5}, {25, 6, 25, 6}, {25, 7, 25, 7},
      {26, 0, 26, 0}, {26, 1, 26, 1}, {26, 2, 26, 2}, {26, 3, 26, 3},
      {26, 4, 26, 4}, {26, 5, 26, 5}, {26, 6, 26, 6}, {26, 7, 26, 7},
      {27, 0, 27, 0}, {27, 1, 27, 1}, {27, 2, 27, 2}, {27, 3, 27, 3},
      {27, 4, 27, 4}, {27, 5, 27, 5}, {27, 6, 27, 6}, {27, 7, 27, 7},
      {28, 0, 28, 0}, {28, 1, 28, 1}, {28, 2, 28, 2}, {28, 3, 28, 3},
      {28, 4, 28, 4}, {28, 5, 28, 5}, {28, 6, 28, 6}, {28, 7, 28, 7},
      {29, 0, 29, 0}, {29, 1, 29, 1}, {29, 2, 29, 2}, {29, 3, 29, 3},
      {29, 4, 29, 4}, {29, 5, 29, 5}, {29, 6, 29, 6}, {29, 7, 29, 7},
      {30, 0, 30, 0}, {30, 1, 30, 1}, {30, 2, 30, 2}, {30, 3, 30, 3},
      {30, 4, 30, 4}, {30, 5, 30, 5}, {30, 6, 30, 6}, {30, 7, 30, 7},
      {31, 0, 31, 0}, {31, 1, 31, 1}, {31, 2, 31, 2}, {31, 3, 31, 3},
      {31, 4, 31, 4}, {31, 5, 31, 5}, {31, 6, 31, 6}, {31, 7, 31, 7},
      {32, 0, 32, 0}, {32, 1, 32, 1}, {32, 2, 32, 2}, {32, 3, 32, 3},
      {32, 4, 32, 4}, {32, 5, 32, 5}, {32, 6, 32, 6}, {32, 7, 32, 7},
      {33, 0, 0, 0},  {33, 1, 0, 1},  {33, 2, 0, 2},  {33, 3, 0, 3}}},

    // 3: tof2 64D
    {{{1, 0, 1, 0},   {1, 1, 1, 1},   {1, 2, 1, 2},   {1, 3, 1, 3},
      {1, 4, 1, 4},   {1, 5, 1, 5},   {1, 6, 1, 6},   {1, 7, 1, 7},
      {2, 0, 2, 0},   {2, 1, 2, 1},   {2, 2, 2, 2},   {2, 3, 2, 3},
      {2, 4, 2, 4},   {2, 5, 2, 5},   {2, 6, 2, 6},   {2, 7, 2, 7},
      {3, 0, 3, 0},   {3, 1, 3, 1},   {3, 2, 3, 2},   {3, 3, 3, 3},
      {3, 4, 3, 4},   {3, 5, 3, 5},   {3, 6, 3, 6},   {3, 7, 3, 7},
      {4, 0, 4, 0},   {4, 1, 4, 1},   {4, 2, 4, 2},   {4, 3, 4, 3},
      {4, 4, 4, 4},   {4, 5, 4, 5},   {4, 6, 4, 6},   {4, 7, 4, 7},
      {5, 0, 5, 0},   {5, 1, 5, 1},   {5, 2, 5, 2},   {5, 3, 5, 3},
      {5, 4, 5, 4},   {5, 5, 5, 5},   {5, 6, 5, 6},   {5, 7, 5, 7},
      {6, 0, 6, 0},   {6, 1, 6, 1},   {6, 2, 6, 2},   {6, 3, 6, 3},
      {6, 4, 6, 4},   {6, 5, 6, 5},   {6, 6, 6, 6},   {6, 7, 6, 7},
      {7, 0, 7, 0},   {7, 1, 7, 1},   {7, 2, 7, 2},   {7, 3, 7, 3},
      {7, 4, 7, 4},   {7, 5, 7, 5},   {7, 6, 7, 6},   {7, 7, 7, 7},
      {8, 0, 8, 0},   {8, 1, 8, 1},   {8, 2, 8, 2},   {8, 3, 8, 3},
      {8, 4, 8, 4},   {8, 5, 8, 5},   {8, 6, 8, 6},   {8, 7, 8, 7},
      {9, 0, 9, 0},   {9, 1, 9, 1},   {9, 2, 9, 2},   {9, 3, 9, 3},
      {9, 4, 9, 4},   {9, 5, 9, 5},   {9, 6, 9, 6},   {9, 7, 9, 7},
      {10, 0, 10, 0}, {10, 1, 10, 1}, {10, 2, 10, 2}, {10, 3, 10, 3},
      {10, 4, 10, 4}, {10, 5, 10, 5}, {10, 6, 10, 6}, {10, 7, 10, 7},
      {11, 0, 11, 0}, {11, 1, 11, 1}, {11, 2, 11, 2}, {11, 3, 11, 3},
      {11, 4, 11, 4}, {11, 5, 11, 5}, {11, 6, 11, 6}, {11, 7, 11, 7},
      {12, 0, 12, 0}, {12, 1, 12, 1}, {12, 2, 12, 2}, {12, 3, 12, 3},
      {12, 4, 12, 4}, {12, 5, 12, 5}, {12, 6, 12, 6}, {12, 7, 12, 7},
      {13, 0, 13, 0}, {13, 1, 13, 1}, {13, 2, 13, 2}, {13, 3, 13, 3},
      {13, 4, 13, 4}, {13, 5, 13, 5}, {13, 6, 13, 6}, {13, 7, 13, 7},
      {14, 0, 14, 0}, {14, 1, 14, 1}, {14, 2, 14, 2}, {14, 3, 14, 3},
      {14, 4, 14, 4}, {14, 5, 14, 5}, {14, 6, 14, 6}, {14, 7, 14, 7},
      {15, 0, 15, 0}, {15, 1, 15, 1}, {15, 2, 15, 2}, {15, 3, 15, 3},
      {15, 4, 15, 4}, {15, 5, 15, 5}, {15, 6, 15, 6}, {15, 7, 15, 7},
      {16, 0, 16, 0}, {16, 1, 16, 1}, {16, 2, 16, 2}, {16, 3, 16, 3},
      {16, 4, 16, 4}, {16, 5, 16, 5}, {16, 6, 16, 6}, {16, 7, 16, 7},
      {17, 0, 0, 0},  {17, 1, 0, 1},  {17, 2, 0, 2},  {17, 3, 0, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 4, -1, 4}, {-1, 5, -1, 5}, {-1, 6, -1, 6}, {-1, 7, -1, 7},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 4, -1, 4}, {-1, 5, -1, 5}, {-1, 6, -1, 6}, {-1, 7, -1, 7},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 4, -1, 4}, {-1, 5, -1, 5}, {-1, 6, -1, 6}, {-1, 7, -1, 7},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 4, -1, 4}, {-1, 5, -1, 5}, {-1, 6, -1, 6}, {-1, 7, -1, 7},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 4, -1, 4}, {-1, 5, -1, 5}, {-1, 6, -1, 6}, {-1, 7, -1, 7},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 4, -1, 4}, {-1, 5, -1, 5}, {-1, 6, -1, 6}, {-1, 7, -1, 7},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 4, -1, 4}, {-1, 5, -1, 5}, {-1, 6, -1, 6}, {-1, 7, -1, 7},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 4, -1, 4}, {-1, 5, -1, 5}, {-1, 6, -1, 6}, {-1, 7, -1, 7},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 4, -1, 4}, {-1, 5, -1, 5}, {-1, 6, -1, 6}, {-1, 7, -1, 7},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 4, -1, 4}, {-1, 5, -1, 5}, {-1, 6, -1, 6}, {-1, 7, -1, 7},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 4, -1, 4}, {-1, 5, -1, 5}, {-1, 6, -1, 6}, {-1, 7, -1, 7},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 4, -1, 4}, {-1, 5, -1, 5}, {-1, 6, -1, 6}, {-1, 7, -1, 7},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 4, -1, 4}, {-1, 5, -1, 5}, {-1, 6, -1, 6}, {-1, 7, -1, 7},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 4, -1, 4}, {-1, 5, -1, 5}, {-1, 6, -1, 6}, {-1, 7, -1, 7},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 4, -1, 4}, {-1, 5, -1, 5}, {-1, 6, -1, 6}, {-1, 7, -1, 7},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 4, -1, 4}, {-1, 5, -1, 5}, {-1, 6, -1, 6}, {-1, 7, -1, 7}}},

    // 4: 32Q systems
    {{{1, 0, 8, 0},   {1, 1, 8, 1},   {1, 2, 8, 2},   {1, 3, 8, 3},
      {2, 0, 7, 0},   {2, 1, 7, 1},   {2, 2, 7, 2},   {2, 3, 7, 3},
      {3, 0, 9, 0},   {3, 1, 9, 1},   {3, 2, 9, 2},   {3, 3, 9, 3},
      {4, 0, 6, 0},   {4, 1, 6, 1},   {4, 2, 6, 2},   {4, 3, 6, 3},
      {5, 0, 10, 0},  {5, 1, 10, 1},  {5, 2, 10, 2},  {5, 3, 10, 3},
      {6, 0, 5, 0},   {6, 1, 5, 1},   {6, 2, 5, 2},   {6, 3, 5, 3},
      {7, 0, 11, 0},  {7, 1, 11, 1},  {7, 2, 11, 2},  {7, 3, 11, 3},
      {8, 0, 4, 0},   {8, 1, 4, 1},   {8, 2, 4, 2},   {8, 3, 4, 3},
      {9, 0, 12, 0},  {9, 1, 12, 1},  {9, 2, 12, 2},  {9, 3, 12, 3},
      {10, 0, 3, 0},  {10, 1, 3, 1},  {10, 2, 3, 2},  {10, 3, 3, 3},
      {11, 0, 13, 0}, {11, 1, 13, 1}, {11, 2, 13, 2}, {11, 3, 13, 3},
      {12, 0, 2, 0},  {12, 1, 2, 1},  {12, 2, 2, 2},  {12, 3, 2, 3},
      {13, 0, 14, 0}, {13, 1, 14, 1}, {13, 2, 14, 2}, {13, 3, 14, 3},
      {14, 0, 1, 0},  {14, 1, 1, 1},  {14, 2, 1, 2},  {14, 3, 1, 3},
      {15, 0, 15, 0}, {15, 1, 15, 1}, {15, 2, 15, 2}, {15, 3, 15, 3},
      {16, 0, 0, 0},  {16, 1, 0, 1},  {16, 2, 0, 2},  {16, 3, 0, 3},

      {17, 0, 24, 0}, {17, 1, 24, 1}, {17, 2, 24, 2}, {17, 3, 24, 3},
      {18, 0, 23, 0}, {18, 1, 23, 1}, {18, 2, 23, 2}, {18, 3, 23, 3},
      {19, 0, 25, 0}, {19, 1, 25, 1}, {19, 2, 25, 2}, {19, 3, 25, 3},
      {20, 0, 22, 0}, {20, 1, 22, 1}, {20, 2, 22, 2}, {20, 3, 22, 3},
      {21, 0, 26, 0}, {21, 1, 26, 1}, {21, 2, 26, 2}, {21, 3, 26, 3},
      {22, 0, 21, 0}, {22, 1, 21, 1}, {22, 2, 21, 2}, {22, 3, 21, 3},
      {23, 0, 27, 0}, {23, 1, 27, 1}, {23, 2, 27, 2}, {23, 3, 27, 3},
      {24, 0, 20, 0}, {24, 1, 20, 1}, {24, 2, 20, 2}, {24, 3, 20, 3},
      {25, 0, 28, 0}, {25, 1, 28, 1}, {25, 2, 28, 2}, {25, 3, 28, 3},
      {26, 0, 19, 0}, {26, 1, 19, 1}, {26, 2, 19, 2}, {26, 3, 19, 3},
      {27, 0, 29, 0}, {27, 1, 29, 1}, {27, 2, 29, 2}, {27, 3, 29, 3},
      {28, 0, 18, 0}, {28, 1, 18, 1}, {28, 2, 18, 2}, {28, 3, 18, 3},
      {29, 0, 30, 0}, {29, 1, 30, 1}, {29, 2, 30, 2}, {29, 3, 30, 3},
      {30, 0, 17, 0}, {30, 1, 17, 1}, {30, 2, 17, 2}, {30, 3, 17, 3},
      {31, 0, 31, 0}, {31, 1, 31, 1}, {31, 2, 31, 2}, {31, 3, 31, 3},
      {32, 0, 16, 0}, {32, 1, 16, 1}, {32, 2, 16, 2}, {32, 3, 16, 3},

      {33, 0, 32, 0}, {33, 1, 32, 1}, {33, 2, 32, 2}, {33, 3, 32, 3},

      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3}}},

    /* 5: TF1 12D Mappings*/
    {{{1, 0, 15, 0},  {1, 1, 15, 1},  {1, 2, 15, 2},  {1, 3, 15, 3},
      {2, 0, 14, 0},  {2, 1, 14, 1},  {2, 2, 14, 2},  {2, 3, 14, 3},
      {3, 0, 13, 0},  {3, 1, 13, 1},  {3, 2, 13, 2},  {3, 3, 13, 3},
      {4, 0, 12, 0},  {4, 1, 12, 1},  {4, 2, 12, 2},  {4, 3, 12, 3},
      {5, 0, 11, 0},  {5, 1, 11, 1},  {5, 2, 11, 2},  {5, 3, 11, 3},
      {6, 0, 10, 0},  {6, 1, 10, 1},  {6, 2, 10, 2},  {6, 3, 10, 3},
      {7, 0, 9, 0},   {7, 1, 9, 1},   {7, 2, 9, 2},   {7, 3, 9, 3},
      {8, 0, 8, 0},   {8, 1, 8, 1},   {8, 2, 8, 2},   {8, 3, 8, 3},
      {9, 0, 7, 0},   {9, 1, 7, 1},   {9, 2, 7, 2},   {9, 3, 7, 3},
      {10, 0, 6, 0},  {10, 1, 6, 1},  {10, 2, 6, 2},  {10, 3, 6, 3},
      {11, 0, 5, 0},  {11, 1, 5, 1},  {11, 2, 5, 2},  {11, 3, 5, 3},
      {12, 0, 4, 0},  {12, 1, 4, 1},  {12, 2, 4, 2},  {12, 3, 4, 3},
      {13, 0, 3, 0},  {13, 1, 3, 1},  {13, 2, 3, 2},  {13, 3, 3, 3},
      {14, 0, 2, 0},  {14, 1, 2, 1},  {14, 2, 2, 2},  {14, 3, 2, 3},
      {15, 0, 1, 0},  {15, 1, 1, 1},  {15, 2, 1, 2},  {15, 3, 1, 3},
      {16, 0, 0, 0},  {16, 1, 0, 1},  {16, 2, 0, 2},  {16, 3, 0, 3},
      {17, 0, 32, 0}, {17, 1, 32, 1}, {17, 2, 32, 2}, {17, 3, 32, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3}}},

    /* 6: tof3 port Mappings - default */
    {{{1, 0, 1, 0},   {1, 2, 1, 1},   {1, 4, 1, 2},   {1, 6, 1, 3},

      {2, 0, 2, 0},   {2, 2, 2, 1},   {2, 4, 2, 2},   {2, 6, 2, 3},

      {3, 0, 3, 0},   {3, 2, 3, 1},   {3, 4, 3, 2},   {3, 6, 3, 3},

      {4, 0, 4, 0},   {4, 2, 4, 1},   {4, 4, 4, 2},   {4, 6, 4, 3},

      {5, 0, 5, 0},   {5, 2, 5, 1},   {5, 4, 5, 2},   {5, 6, 5, 3},

      {6, 0, 6, 0},   {6, 2, 6, 1},   {6, 4, 6, 2},   {6, 6, 6, 3},

      {7, 0, 7, 0},   {7, 2, 7, 1},   {7, 4, 7, 2},   {7, 6, 7, 3},

      {8, 0, 8, 0},   {8, 2, 8, 1},   {8, 4, 8, 2},   {8, 6, 8, 3},

      {9, 0, 9, 0},   {9, 2, 9, 1},   {9, 4, 9, 2},   {9, 6, 9, 3},

      {10, 0, 10, 0}, {10, 2, 10, 1}, {10, 4, 10, 2}, {10, 6, 10, 3},

      {11, 0, 11, 0}, {11, 2, 11, 1}, {11, 4, 11, 2}, {11, 6, 11, 3},

      {12, 0, 12, 0}, {12, 2, 12, 1}, {12, 4, 12, 2}, {12, 6, 12, 3},

      {13, 0, 13, 0}, {13, 2, 13, 1}, {13, 4, 13, 2}, {13, 6, 13, 3},

      {14, 0, 14, 0}, {14, 2, 14, 1}, {14, 4, 14, 2}, {14, 6, 14, 3},

      {15, 0, 15, 0}, {15, 2, 15, 1}, {15, 4, 15, 2}, {15, 6, 15, 3},

      {16, 0, 16, 0}, {16, 2, 16, 1}, {16, 4, 16, 2}, {16, 6, 16, 3},

      {17, 0, 17, 0}, {17, 2, 17, 1}, {17, 4, 17, 2}, {17, 6, 17, 3},

      {18, 0, 18, 0}, {18, 2, 18, 1}, {18, 4, 18, 2}, {18, 6, 18, 3},

      {19, 0, 19, 0}, {19, 2, 19, 1}, {19, 4, 19, 2}, {19, 6, 19, 3},

      {20, 0, 20, 0}, {20, 2, 20, 1}, {20, 4, 20, 2}, {20, 6, 20, 3},

      {21, 0, 21, 0}, {21, 2, 21, 1}, {21, 4, 21, 2}, {21, 6, 21, 3},

      {22, 0, 22, 0}, {22, 2, 22, 1}, {22, 4, 22, 2}, {22, 6, 22, 3},
      {23, 0, 23, 0}, {23, 2, 23, 1}, {23, 4, 23, 2}, {23, 6, 23, 3},
      {24, 0, 24, 0}, {24, 2, 24, 1}, {24, 4, 24, 2}, {24, 6, 24, 3},
      {25, 0, 25, 0}, {25, 2, 25, 1}, {25, 4, 25, 2}, {25, 6, 25, 3},
      {26, 0, 26, 0}, {26, 2, 26, 1}, {26, 4, 26, 2}, {26, 6, 26, 3},
      {27, 0, 27, 0}, {27, 2, 27, 1}, {27, 4, 27, 2}, {27, 6, 27, 3},
      {28, 0, 28, 0}, {28, 2, 28, 1}, {28, 4, 28, 2}, {28, 6, 28, 3},
      {29, 0, 29, 0}, {29, 2, 29, 1}, {29, 4, 29, 2}, {29, 6, 29, 3},
      {30, 0, 30, 0}, {30, 2, 30, 1}, {30, 4, 30, 2}, {30, 6, 30, 3},
      {31, 0, 31, 0}, {31, 2, 31, 1}, {31, 4, 31, 2}, {31, 6, 31, 3},
      {32, 0, 32, 0}, {32, 2, 32, 1}, {32, 4, 32, 2}, {32, 6, 32, 3},
#ifndef DEVICE_IS_EMULATOR
      {33, 0, 0, 0},  {33, 2, 0, 1},  {-1, 0, -1, 0}, {-1, 0, -1, 0},
#else
      {-1, 0, -1, 0}, {-1, 0, -1, 1}, {-1, 0, -1, 0}, {-1, 0, -1, 0},
#endif

      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3},
      {-1, 0, -1, 0}, {-1, 1, -1, 1}, {-1, 2, -1, 2}, {-1, 3, -1, 3}}},

    /* 7: tof3 8-pipe port Mappings - */
    {{{1, 0, 1, 0},   {1, 2, 1, 1},   {1, 4, 1, 2},   {1, 6, 1, 3},

      {2, 0, 2, 0},   {2, 2, 2, 1},   {2, 4, 2, 2},   {2, 6, 2, 3},

      {3, 0, 3, 0},   {3, 2, 3, 1},   {3, 4, 3, 2},   {3, 6, 3, 3},

      {4, 0, 4, 0},   {4, 2, 4, 1},   {4, 4, 4, 2},   {4, 6, 4, 3},

      {5, 0, 5, 0},   {5, 2, 5, 1},   {5, 4, 5, 2},   {5, 6, 5, 3},

      {6, 0, 6, 0},   {6, 2, 6, 1},   {6, 4, 6, 2},   {6, 6, 6, 3},

      {7, 0, 7, 0},   {7, 2, 7, 1},   {7, 4, 7, 2},   {7, 6, 7, 3},

      {8, 0, 8, 0},   {8, 2, 8, 1},   {8, 4, 8, 2},   {8, 6, 8, 3},

      {9, 0, 9, 0},   {9, 2, 9, 1},   {9, 4, 9, 2},   {9, 6, 9, 3},

      {10, 0, 10, 0}, {10, 2, 10, 1}, {10, 4, 10, 2}, {10, 6, 10, 3},

      {11, 0, 11, 0}, {11, 2, 11, 1}, {11, 4, 11, 2}, {11, 6, 11, 3},

      {12, 0, 12, 0}, {12, 2, 12, 1}, {12, 4, 12, 2}, {12, 6, 12, 3},

      {13, 0, 13, 0}, {13, 2, 13, 1}, {13, 4, 13, 2}, {13, 6, 13, 3},

      {14, 0, 14, 0}, {14, 2, 14, 1}, {14, 4, 14, 2}, {14, 6, 14, 3},

      {15, 0, 15, 0}, {15, 2, 15, 1}, {15, 4, 15, 2}, {15, 6, 15, 3},

      {16, 0, 16, 0}, {16, 2, 16, 1}, {16, 4, 16, 2}, {16, 6, 16, 3},

      {17, 0, 17, 0}, {17, 2, 17, 1}, {17, 4, 17, 2}, {17, 6, 17, 3},

      {18, 0, 18, 0}, {18, 2, 18, 1}, {18, 4, 18, 2}, {18, 6, 18, 3},

      {19, 0, 19, 0}, {19, 2, 19, 1}, {19, 4, 19, 2}, {19, 6, 19, 3},

      {20, 0, 20, 0}, {20, 2, 20, 1}, {20, 4, 20, 2}, {20, 6, 20, 3},

      {21, 0, 21, 0}, {21, 2, 21, 1}, {21, 4, 21, 2}, {21, 6, 21, 3},

      {22, 0, 22, 0}, {22, 2, 22, 1}, {22, 4, 22, 2}, {22, 6, 22, 3},
      {23, 0, 23, 0}, {23, 2, 23, 1}, {23, 4, 23, 2}, {23, 6, 23, 3},
      {24, 0, 24, 0}, {24, 2, 24, 1}, {24, 4, 24, 2}, {24, 6, 24, 3},
      {25, 0, 25, 0}, {25, 2, 25, 1}, {25, 4, 25, 2}, {25, 6, 25, 3},
      {26, 0, 26, 0}, {26, 2, 26, 1}, {26, 4, 26, 2}, {26, 6, 26, 3},
      {27, 0, 27, 0}, {27, 2, 27, 1}, {27, 4, 27, 2}, {27, 6, 27, 3},
      {28, 0, 28, 0}, {28, 2, 28, 1}, {28, 4, 28, 2}, {28, 6, 28, 3},
      {29, 0, 29, 0}, {29, 2, 29, 1}, {29, 4, 29, 2}, {29, 6, 29, 3},
      {30, 0, 30, 0}, {30, 2, 30, 1}, {30, 4, 30, 2}, {30, 6, 30, 3},
      {31, 0, 31, 0}, {31, 2, 31, 1}, {31, 4, 31, 2}, {31, 6, 31, 3},
      {32, 0, 32, 0}, {32, 2, 32, 1}, {32, 4, 32, 2}, {32, 6, 32, 3},

      {33, 0, 33, 0}, {33, 2, 33, 1}, {33, 4, 33, 2}, {33, 6, 33, 3},

      {34, 0, 34, 0}, {34, 2, 34, 1}, {34, 4, 34, 2}, {34, 6, 34, 3},

      {35, 0, 35, 0}, {35, 2, 35, 1}, {35, 4, 35, 2}, {35, 6, 35, 3},

      {36, 0, 36, 0}, {36, 2, 36, 1}, {36, 4, 36, 2}, {36, 6, 36, 3},

      {37, 0, 37, 0}, {37, 2, 37, 1}, {37, 4, 37, 2}, {37, 6, 37, 3},

      {38, 0, 38, 0}, {38, 2, 38, 1}, {38, 4, 38, 2}, {38, 6, 38, 3},

      {39, 0, 39, 0}, {39, 2, 39, 1}, {39, 4, 39, 2}, {39, 6, 39, 3},

      {40, 0, 40, 0}, {40, 2, 40, 1}, {40, 4, 40, 2}, {40, 6, 40, 3},

      {41, 0, 41, 0}, {41, 2, 41, 1}, {41, 4, 41, 2}, {41, 6, 41, 3},

      {42, 0, 42, 0}, {42, 2, 42, 1}, {42, 4, 42, 2}, {42, 6, 42, 3},

      {43, 0, 43, 0}, {43, 2, 43, 1}, {43, 4, 43, 2}, {43, 6, 43, 3},

      {44, 0, 44, 0}, {44, 2, 44, 1}, {44, 4, 44, 2}, {44, 6, 44, 3},

      {45, 0, 45, 0}, {45, 2, 45, 1}, {45, 4, 45, 2}, {45, 6, 45, 3},

      {46, 0, 46, 0}, {46, 2, 46, 1}, {46, 4, 46, 2}, {46, 6, 46, 3},

      {47, 0, 47, 0}, {47, 2, 47, 1}, {47, 4, 47, 2}, {47, 6, 47, 3},

      {48, 0, 48, 0}, {48, 2, 48, 1}, {48, 4, 48, 2}, {48, 6, 48, 3},

      {49, 0, 49, 0}, {49, 2, 49, 1}, {49, 4, 49, 2}, {49, 6, 49, 3},

      {50, 0, 50, 0}, {50, 2, 50, 1}, {50, 4, 50, 2}, {50, 6, 50, 3},

      {51, 0, 51, 0}, {51, 2, 51, 1}, {51, 4, 51, 2}, {51, 6, 51, 3},

      {52, 0, 52, 0}, {52, 2, 52, 1}, {52, 4, 52, 2}, {52, 6, 52, 3},

      {53, 0, 53, 0}, {53, 2, 53, 1}, {53, 4, 53, 2}, {53, 6, 53, 3},

      {54, 0, 54, 0}, {54, 2, 54, 1}, {54, 4, 54, 2}, {54, 6, 54, 3},

      {55, 0, 55, 0}, {55, 2, 55, 1}, {55, 4, 55, 2}, {55, 6, 55, 3},

      {56, 0, 56, 0}, {56, 2, 56, 1}, {56, 4, 56, 2}, {56, 6, 56, 3},

      {57, 0, 57, 0}, {57, 2, 57, 1}, {57, 4, 57, 2}, {57, 6, 57, 3},

      {58, 0, 58, 0}, {58, 2, 58, 1}, {58, 4, 58, 2}, {58, 6, 58, 3},

      {59, 0, 59, 0}, {59, 2, 59, 1}, {59, 4, 59, 2}, {59, 6, 59, 3},

      {60, 0, 60, 0}, {60, 2, 60, 1}, {60, 4, 60, 2}, {60, 6, 60, 3},

      {61, 0, 61, 0}, {61, 2, 61, 1}, {61, 4, 61, 2}, {61, 6, 61, 3},

      {62, 0, 62, 0}, {62, 2, 62, 1}, {62, 4, 62, 2}, {62, 6, 62, 3},

      {63, 0, 63, 0}, {63, 2, 63, 1}, {63, 4, 63, 2}, {63, 6, 63, 3},

      {64, 0, 64, 0}, {64, 2, 64, 1}, {64, 4, 64, 2}, {64, 6, 64, 3},

#ifndef DEVICE_IS_EMULATOR
      {65, 0, 0, 0},  {65, 2, 0, 1},  {-1, 0, -1, 0}, {-1, 0, -1, 0}}},
#else
      {-1, 0, -1, 0}, {-1, 0, -1, 1}, {-1, 0, -1, 0}, {-1, 0, -1, 0}}},
#endif

};

static void bf_model_port_info_to_str(uint32_t conn,
                                      uint32_t chnl,
                                      char *str_hdl,
                                      uint32_t str_len) {
  if (!str_hdl) return;

  snprintf(str_hdl, str_len, "%d/%d", conn, chnl);

  return;
}

static int bf_model_port_str_to_info(const char *str,
                                     uint32_t *conn,
                                     uint32_t *chnl) {
  int len, i;
  char *tmp_str, *ptr;
  int ret = 0;

  len = strlen(str);
  tmp_str = (char *)malloc(len + 1);
  if (tmp_str == NULL) {
    return -1;
  }
  memcpy(tmp_str, str, len);
  tmp_str[len] = '\0';

  ptr = tmp_str;
  i = 0;
  while (*ptr != '/' && i < len) {
    ptr++;
    i++;
  }
  if (i == len) {
    ret = -1;
    goto end;
  }
  *ptr = '\0';
  if (*tmp_str == '-') {
    *conn = -1;
  } else {
    *conn = strtoul(tmp_str, NULL, 10);
  }
  ptr++;
  if (*ptr == '-') {
    *chnl = -1;
  } else {
    *chnl = strtoul(ptr, NULL, 10);
  }

end:
  free(tmp_str);
  return ret;
}

bool mapping_done = false;

static void bf_model_select_port_mappings_based_on_sku(bf_dev_id_t dev_id) {
  uint32_t chip_sku = lld_sku_get_sku(dev_id);
  model_fp2mac_all *used_map;
  bf_dev_family_t dev_family =
      bf_dev_type_to_family(lld_sku_get_dev_type(dev_id));

  if (mapping_done || (dev_id >= NUM_SIMULATED_DEVICES)) return;

  if (chip_sku == BFN_SKU_BFN_T1_64Q) {
    // For Tofino 6.4 Full, replay mavericks mappings
    front_port_map[dev_id] = &front_port_map_all_skus[0];
  } else if (chip_sku == BFN_SKU_BFN0128Q) {  // tof2 128Q pltfm
    front_port_map[dev_id] = &front_port_map_all_skus[2];
  } else if (chip_sku == BFN_SKU_BFN0064D) {  // tof2 64D pltfm
    front_port_map[dev_id] = &front_port_map_all_skus[3];
  } else if (chip_sku == BFN_SKU_BFN_T1_32Q) {  // tof 32Q pltfm
    front_port_map[dev_id] = &front_port_map_all_skus[4];
  } else if (chip_sku == BFN_SKU_BFNT31_12Q) {  // tof3 256Q pltfm
    front_port_map[dev_id] = &front_port_map_all_skus[6];
  } else if (chip_sku == BFN_SKU_BFNT32_25Q) {  // tof3 256O pltfm
    front_port_map[dev_id] = &front_port_map_all_skus[7];
  } else {
    // For all other SKUs, replay montara mappings
    front_port_map[dev_id] = &front_port_map_all_skus[1];
  }

#if defined(DEVICE_IS_EMULATOR)
#if defined(DEVICE_IS_EMULATOR_SERDES_56G)
  // Use current sku defined
#else
  // remap to 112G serdes
  int chnl = 0;
  if (dev_family == BF_DEV_FAMILY_TOFINO3) {
    for (int i = 0; i < 65 * 4; i++, chnl++) {
      if ((int)front_port_map[dev_id]->front_port_mapping[i].conn_id != -1) {
        front_port_map[dev_id]->front_port_mapping[i].chnl_id = chnl % 4;
      }
    }
  }
#endif
#endif

  // initialize for all devices
  for (int d = 0; d < num_devices; d++) {
    used_map = bf_sys_malloc(sizeof(model_fp2mac_all));
    assert(used_map != NULL);
    memcpy(
        (char *)used_map, (char *)front_port_map[0], sizeof(model_fp2mac_all));

    // now map each successive dev_id to succeessive conn_id's
    for (int n = 0; n < 65 * 4; n++) {
      if ((int)used_map->front_port_mapping[n].conn_id != -1) {
        used_map->front_port_mapping[n].conn_id =
            used_map->front_port_mapping[n].conn_id + (100 * d);
        // printf("Set %d/%d (on dev_id: %d) in map\n",
        //      used_map->front_port_mapping[n].conn_id,
        //      used_map->front_port_mapping[n].chnl_id,
        //      d);
      }
    }
    front_port_map[d] = used_map;
  }
  mapping_done = true;
  (void)dev_family;
}

static bf_status_t bf_model_port_hdl_to_dev_id_get(
    bf_pal_front_port_handle_t *port_hdl, bf_dev_id_t *dev_id) {
  if (!port_hdl) return BF_INVALID_ARG;
  if (!dev_id) return BF_INVALID_ARG;
  *dev_id = -1;
  for (int d = 0; d < num_devices; d++) {
    for (int n = 0; n < 65 * 4; n++) {
      if (front_port_map[d]->front_port_mapping[n].conn_id ==
          port_hdl->conn_id) {
        *dev_id = d;
        return BF_SUCCESS;
      }
    }
  }
  return BF_INVALID_ARG;
}

/**
 * This is called by the bf_pm to get the first port info
 */
bf_status_t bf_model_front_panel_port_get_first(
    bf_pal_front_port_info_t *first_port_info) {
  bf_dev_id_t dev_id = 0;

  // Safety checks
  if (!first_port_info) return BF_INVALID_ARG;

  bf_model_select_port_mappings_based_on_sku(dev_id);

  first_port_info->dev_id = dev_id;
  first_port_info->port_hdl.conn_id =
      front_port_map[dev_id]->front_port_mapping[0].conn_id;
  first_port_info->port_hdl.chnl_id =
      front_port_map[dev_id]->front_port_mapping[0].chnl_id;
  first_port_info->log_mac_id =
      front_port_map[dev_id]->front_port_mapping[0].log_mac;
  first_port_info->log_mac_lane =
      front_port_map[dev_id]->front_port_mapping[0].log_chnl;
  bf_model_port_info_to_str(first_port_info->port_hdl.conn_id,
                            first_port_info->port_hdl.chnl_id,
                            first_port_info->port_str,
                            sizeof(first_port_info->port_str));
  return BF_SUCCESS;
}

/**
 * This is called by the bf_pm to get the first port info
 */
static bf_status_t bf_model_front_panel_port_get_first_on_dev(
    bf_dev_id_t dev_id, bf_pal_front_port_info_t *first_port_info) {
  // Safety checks
  if (!first_port_info) return BF_INVALID_ARG;

  first_port_info->dev_id = dev_id;
  first_port_info->port_hdl.conn_id =
      front_port_map[dev_id]->front_port_mapping[0].conn_id;
  first_port_info->port_hdl.chnl_id =
      front_port_map[dev_id]->front_port_mapping[0].chnl_id;
  first_port_info->log_mac_id =
      front_port_map[dev_id]->front_port_mapping[0].log_mac;
  first_port_info->log_mac_lane =
      front_port_map[dev_id]->front_port_mapping[0].log_chnl;
  bf_model_port_info_to_str(first_port_info->port_hdl.conn_id,
                            first_port_info->port_hdl.chnl_id,
                            first_port_info->port_str,
                            sizeof(first_port_info->port_str));
  return BF_SUCCESS;
}

/**
 * This is called by the bf_pm to get the next port info.
 * CPU ports (pipe 0 : port 64-67) are returned at the very end
 */
bf_status_t bf_model_front_panel_port_get_next(
    bf_pal_front_port_info_t *curr_port_info,
    bf_pal_front_port_info_t *next_port_info) {
  bf_status_t sts;
  bf_dev_id_t dev_id = 0;
  uint32_t i;

  // Safety checks
  if (!next_port_info) return BF_INVALID_ARG;

  if (!curr_port_info) {
    // Return the first port in the system
    return bf_model_front_panel_port_get_first(next_port_info);
  }

  dev_id = curr_port_info->dev_id;

  for (i = 0; i < ((sizeof(front_port_map_all_skus[0]) /
                    sizeof(front_port_map_all_skus[0].front_port_mapping[0])) -
                   1);
       i++) {
    if ((front_port_map[dev_id]->front_port_mapping[i].conn_id ==
         curr_port_info->port_hdl.conn_id) &&
        (front_port_map[dev_id]->front_port_mapping[i].chnl_id ==
         curr_port_info->port_hdl.chnl_id)) {
      if (front_port_map[dev_id]->front_port_mapping[i + 1].conn_id ==
          (uint32_t)-1) {
        // Indicates that the current port is the final port of this SKU
        break;
      }
      next_port_info->dev_id = dev_id;
      next_port_info->port_hdl.conn_id =
          front_port_map[dev_id]->front_port_mapping[i + 1].conn_id;
      next_port_info->port_hdl.chnl_id =
          front_port_map[dev_id]->front_port_mapping[i + 1].chnl_id;
      next_port_info->log_mac_id =
          front_port_map[dev_id]->front_port_mapping[i + 1].log_mac;
      next_port_info->log_mac_lane =
          front_port_map[dev_id]->front_port_mapping[i + 1].log_chnl;
      bf_model_port_info_to_str(next_port_info->port_hdl.conn_id,
                                next_port_info->port_hdl.chnl_id,
                                next_port_info->port_str,
                                sizeof(next_port_info->port_str));
      // printf("getnext: %d/%d (on dev_id: %d) name=%s\n",
      //      next_port_info->port_hdl.conn_id,
      //      next_port_info->port_hdl.chnl_id,
      //      next_port_info->dev_id,
      //      next_port_info->port_str);
      return BF_SUCCESS;
    }
  }

  if ((front_port_map[dev_id]->front_port_mapping[i].conn_id ==
       curr_port_info->port_hdl.conn_id) &&
      (front_port_map[dev_id]->front_port_mapping[i].chnl_id ==
       curr_port_info->port_hdl.chnl_id)) {
    if (dev_id >= num_devices - 1) {
      // This is the final port in the system
      return BF_OBJECT_NOT_FOUND;
    }
    // Indicates all ports in the current device have been traversed. Thus
    // return the first port of the next device
    sts = bf_model_front_panel_port_get_first_on_dev(curr_port_info->dev_id + 1,
                                                     next_port_info);
    if (sts != BF_SUCCESS) {
      printf("Unable to get the first port for dev : %d : %s (%d)\n",
             curr_port_info->dev_id + 1,
             bf_err_str(sts),
             sts);
      return sts;
    }
    // Overwrite the dev_id with the correct value (because it would be 0)
    // next_port_info->dev_id = dev_id + 1;
    return BF_SUCCESS;
  }

  return BF_SUCCESS;
}

bf_status_t bf_model_mac_to_serdes_map_get(
    bf_pal_front_port_handle_t *port_hdl,
    bf_pal_mac_to_serdes_lane_map_t *mac_blk_map) {
  bf_status_t rc;
  bf_dev_id_t dev_id = 0;

  // Safety checks
  if (!port_hdl) return BF_INVALID_ARG;
  if (!mac_blk_map) return BF_INVALID_ARG;

  mac_blk_map->tx_lane = port_hdl->chnl_id;  // Straight through mapping
  mac_blk_map->rx_lane = port_hdl->chnl_id;  // Striaght through mapping

  // update or copy of added devices, since we know this device has been added
  // otherwise bf_pm would not have asked for this mapping.
  rc = bf_model_port_hdl_to_dev_id_get(port_hdl, &dev_id);
  if (rc == BF_SUCCESS) {
    device_added[dev_id] = true;
  }

  return BF_SUCCESS;
}

bf_status_t bf_model_serdes_info_get(bf_pal_front_port_handle_t *port_hdl,
                                     bf_pal_serdes_info_t *serdes_info) {
  // Safety checks
  if (!port_hdl) return BF_INVALID_ARG;
  if (!serdes_info) return BF_INVALID_ARG;

  // Dummy values
  serdes_info->tx_inv = false;
  serdes_info->rx_inv = false;
  serdes_info->tx_attn = 0;
  serdes_info->tx_pre = 0;
  serdes_info->tx_post = 0;

  return BF_SUCCESS;
}

bf_status_t bf_model_media_type_get(bf_pal_front_port_handle_t *port_hdl,
                                    bf_media_type_t *media_type) {
  // Safety checks
  if (!port_hdl) return BF_INVALID_ARG;
  if (!media_type) return BF_INVALID_ARG;

  // Dummy value
  *media_type = BF_MEDIA_TYPE_UNKNOWN;

  return BF_SUCCESS;
}

bf_status_t bf_model_port_str_to_hdl_get(const char *port_str,
                                         bf_pal_front_port_handle_t *port_hdl) {
  // Safety checks
  if (!port_hdl) return BF_INVALID_ARG;

  if (bf_model_port_str_to_info(
          port_str, &port_hdl->conn_id, &port_hdl->chnl_id) != 0) {
    return BF_OBJECT_NOT_FOUND;
  }

  return BF_SUCCESS;
}

bf_status_t bf_model_pre_port_enable_cfg_set(
    bf_pal_front_port_handle_t *port_hdl,
    bf_pal_front_port_cb_cfg_t *port_cfg) {
  bf_dev_id_t dev_id = 0;
  bf_status_t rc;

  rc = bf_model_port_hdl_to_dev_id_get(port_hdl, &dev_id);
  if (rc != BF_SUCCESS) {
    return rc;
  }

  bf_pm_pltfm_front_port_ready_for_bringup(dev_id, port_hdl, true);
  bf_pm_port_serdes_rx_ready_for_bringup_set(dev_id, port_hdl, true);
  bf_pm_port_module_ready_for_link_handling_set(dev_id, port_hdl, true);

  return BF_SUCCESS;
  (void)port_cfg;
}

bf_status_t bf_model_init(bf_dev_init_mode_t warm_init_mode) {
  bf_status_t sts = BF_SUCCESS;
  bf_pal_front_port_info_t port_info;
  bf_dev_id_t dev_id = 0;

  // Mark all the ports ready for bringup on the model
  sts = bf_model_front_panel_port_get_first(&port_info);
  if (sts != BF_SUCCESS) {
    printf("Unable to get first port : %s (%d)\n", bf_err_str(sts), sts);
    goto end;
  }
  for (; sts == BF_SUCCESS;
       sts = bf_model_front_panel_port_get_next(&port_info, &port_info)) {
    // make sure device hosting this port has been added
    if (!device_added[port_info.dev_id]) continue;

#ifndef DEVICE_IS_EMULATOR
    sts = bf_pm_pltfm_front_port_ready_for_bringup(
        port_info.dev_id, &port_info.port_hdl, true);
    if (sts != BF_SUCCESS) {
      printf(
          "Unable to mark port ready for bringup for dev : %d : front port : "
          "%d/%d : %s (%d)\n",
          port_info.dev_id,
          port_info.port_hdl.conn_id,
          port_info.port_hdl.chnl_id,
          bf_err_str(sts),
          sts);
      // goto end;
    }
#endif
  }

  (void)warm_init_mode;

  return BF_SUCCESS;
end:
  printf(
      "Unable to do one time initializations for model on bf_pm for dev : %d : "
      "%s (%d)\n",
      dev_id,
      bf_err_str(sts),
      sts);
  return sts;
}

bf_status_t bf_model_safe_to_call_in_notify() {
  // Nothing to do for model

  return BF_SUCCESS;
}

bf_status_t bf_model_num_devices_set(int devices) {
  // Safety checks
  if (!devices) return BF_INVALID_ARG;

  num_devices = devices;

  return BF_SUCCESS;
}

bf_status_t bf_model_mac_to_multi_serdes_map_get(
    bf_pal_front_port_handle_t *port_hdl,
    bf_pal_mac_to_multi_serdes_lane_map_t *mac_blk_map) {
  bf_status_t rc;
  bf_dev_id_t dev_id = 0;
  int tx_lane_map[4][2] = {{7, 6}, {5, 4}, {3, 2}, {1, 0}};
  int rx_lane_map[4][2] = {{0, 1}, {2, 3}, {4, 5}, {6, 7}};
  uint32_t i;
  bf_dev_family_t dev_family =
      bf_dev_type_to_family(lld_sku_get_dev_type(dev_id));

  // Safety checks
  if (!port_hdl) return BF_INVALID_ARG;
  if (!mac_blk_map) return BF_INVALID_ARG;
  if (port_hdl->chnl_id > 6) return BF_INVALID_ARG;

  if (dev_family == BF_DEV_FAMILY_TOFINO3) {
    mac_blk_map->num_serdes_per_lane = 2;
  } else {
    return BF_INVALID_ARG;
  }

  for (i = 0; i < mac_blk_map->num_serdes_per_lane; i++) {
    mac_blk_map->rx_lane[i] = rx_lane_map[port_hdl->chnl_id / 2][i];
    mac_blk_map->tx_lane[i] = tx_lane_map[port_hdl->chnl_id / 2][i];
  }

#if defined(DEVICE_IS_EMULATOR)
#if defined(DEVICE_IS_EMULATOR_SERDES_56G)
  // Use default
#else
  if (dev_family == BF_DEV_FAMILY_TOFINO3) {
    mac_blk_map->num_serdes_per_lane = 1;
    mac_blk_map->rx_lane[0] = port_hdl->chnl_id;
    mac_blk_map->tx_lane[0] = port_hdl->chnl_id;
  }
#endif
#endif

  // update or copy of added devices, since we know this device has been added
  // otherwise bf_pm would not have asked for this mapping.
  rc = bf_model_port_hdl_to_dev_id_get(port_hdl, &dev_id);
  if (rc == BF_SUCCESS) {
    device_added[dev_id] = true;
  }

  return BF_SUCCESS;
}
